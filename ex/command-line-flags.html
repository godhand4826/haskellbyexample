<!DOCTYPE html><html><head><title>Haskell by Example: Command-Line Flags</title><link rel="stylesheet" href="../css/main.css"><link rel="stylesheet" href="../css/prism.css"><script src="../js/prism.js"></script></head><body><div class="example"><h1>Haskell by Example: Command-Line Flags</h1><a href="https://gobyexample.com/command-line-flags">original</a><p>To work this example, you need install <a href="http://hackage.haskell.org/package/optparse-declarative">optparse-declarative</a>.</p>
<pre><code class="language-bash">$ cabal install optparse-declarative</code></pre>
<pre><code class="language-haskell">{-# LANGUAGE DataKinds #-}
import Options.Declarative
import Control.Monad.IO.Class (liftIO)

flags :: Flag &quot;&quot; &#39;[&quot;word&quot;] &quot;\&quot;foo\&quot;&quot; &quot;a string&quot;     (Def &quot;foo&quot; String)
      -&gt; Flag &quot;&quot; &#39;[&quot;numb&quot;] &quot;42&quot;      &quot;an int&quot;       (Def &quot;42&quot; Int)
      -&gt; Flag &quot;&quot; &#39;[&quot;fork&quot;] &quot;false&quot;   &quot;a bool&quot;       Bool
      -&gt; Flag &quot;&quot; &#39;[&quot;svar&quot;] &quot;\&quot;bar\&quot;&quot; &quot;a string var&quot; (Def &quot;bar&quot; String)
      -&gt; Arg &quot;ARGS&quot; [String]
      -&gt; Cmd &quot;Command-Line Flags&quot; ()
flags word numb fork svar args = do
    liftIO . putStrLn $ &quot;word:&quot; ++ get word
    liftIO . putStrLn $ &quot;numb:&quot; ++ (show . get $ numb)
    liftIO . putStrLn $ &quot;fork:&quot; ++ (show . get $ fork)
    liftIO . putStrLn $ &quot;svar:&quot; ++ get svar
    liftIO . putStrLn $ &quot;tail:&quot; ++ (show . get $ args)

main :: IO ()
main = run_ flags</code></pre>
<pre><code class="language-bash">$ ghc command-line-flags.hs -o command-line-flags

$ ./command-line-flags --word=opt --numb=7 --fork --svar=flag
word:opt
numb:7
fork:True
svar:flag
tail:[]

$ ./command-line-flags --word=opt
word:opt
numb:42
fork:False
svar:bar
tail:[]

$ ./command-line-flags --word=opt a1 a2 a3
word:opt
numb:42
fork:False
svar:bar
tail:[&quot;a1&quot;,&quot;a2&quot;,&quot;a3&quot;]

$ ./command-line-flags --word=opt a1 a2 a3 --numb=7
word:opt
numb:42
fork:False
svar:bar
tail:[&quot;a1&quot;,&quot;a2&quot;,&quot;a3&quot;,&quot;--numb=7&quot;]

$ ./command-line-flags -?
Usage: command-line-flags [OPTION...] ARGS
  Command-Line Flags

Options:
         --word=&quot;foo&quot;   a string
         --numb=42      an int
         --fork         a bool
         --svar=&quot;bar&quot;   a string var
  -?     --help         display this help and exit
  -v[n]  --verbose[=n]  set verbosity level

$ ./command-line-flags --wat
command-line-flags: unrecognized option &#39;--wat&#39;
Try &#39;command-line-flags --help&#39; for more information.</code></pre><a href="../">back to index</a></div></body></html>